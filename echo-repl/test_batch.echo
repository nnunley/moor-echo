.eval
// Test runner batch mode
let pass = 0
let fail = 0

let test = fn {actual, expected, name}
  if actual == expected
    pass = pass + 1
    "✓ " + name
  else  
    fail = fail + 1
    "✗ " + name + " (got " + actual + ", wanted " + expected + ")"
  endif
endfn

"=== Echo Language Tests ==="

test(1 + 1, 2, "Addition")
test(5 - 3, 2, "Subtraction") 
test(4 * 3, 12, "Multiplication")
test(10 / 2, 5, "Division")

let add = fn {x, y} x + y endfn
test(add(5, 3), 8, "Lambda function")

let opt = fn {x, ?y=10} x + y endfn
test(opt(5), 15, "Optional param default")
test(opt(5, 3), 8, "Optional param override")

let sum = 0
for i in [1, 2, 3]
  sum = sum + i  
endfor
test(sum, 6, "For loop")

"\n=== Summary ==="
"Passed: " + pass
"Failed: " + fail
if fail == 0
  "✅ All tests passed!"
else
  "❌ Some tests failed!"  
endif
.